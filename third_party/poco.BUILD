# Description:
#   A small, self-contained C++ toolkit

licenses(["notice"])  # Boost Software License

cc_library(
    name = "foundation",
    srcs = [
        "Foundation/src/ASCIIEncoding.cpp",
        "Foundation/src/AbstractObserver.cpp",
        "Foundation/src/ActiveDispatcher.cpp",
        "Foundation/src/ArchiveStrategy.cpp",
        "Foundation/src/Ascii.cpp",
        "Foundation/src/AsyncChannel.cpp",
        "Foundation/src/AtomicCounter.cpp",
        "Foundation/src/Base64Decoder.cpp",
        "Foundation/src/Base64Encoder.cpp",
        "Foundation/src/BinaryReader.cpp",
        "Foundation/src/BinaryWriter.cpp",
        "Foundation/src/Bugcheck.cpp",
        "Foundation/src/ByteOrder.cpp",
        "Foundation/src/Channel.cpp",
        "Foundation/src/Checksum.cpp",
        "Foundation/src/Clock.cpp",
        "Foundation/src/Condition.cpp",
        "Foundation/src/Configurable.cpp",
        "Foundation/src/ConsoleChannel.cpp",
        "Foundation/src/CountingStream.cpp",
        "Foundation/src/DateTime.cpp",
        "Foundation/src/DateTimeFormat.cpp",
        "Foundation/src/DateTimeFormatter.cpp",
        "Foundation/src/DateTimeParser.cpp",
        "Foundation/src/Debugger.cpp",
        "Foundation/src/DeflatingStream.cpp",
        "Foundation/src/DigestEngine.cpp",
        "Foundation/src/DigestStream.cpp",
        "Foundation/src/DirectoryIterator.cpp",
        "Foundation/src/Environment.cpp",
        "Foundation/src/ErrorHandler.cpp",
        "Foundation/src/Event.cpp",
        "Foundation/src/EventArgs.cpp",
        "Foundation/src/EventChannel.cpp",
        "Foundation/src/Exception.cpp",
        "Foundation/src/FPEnvironment.cpp",
        "Foundation/src/File.cpp",
        "Foundation/src/FileChannel.cpp",
        "Foundation/src/FileStream.cpp",
        "Foundation/src/FileStreamFactory.cpp",
        "Foundation/src/Format.cpp",
        "Foundation/src/Formatter.cpp",
        "Foundation/src/FormattingChannel.cpp",
        "Foundation/src/Glob.cpp",
        "Foundation/src/Hash.cpp",
        "Foundation/src/HashStatistic.cpp",
        "Foundation/src/HexBinaryDecoder.cpp",
        "Foundation/src/HexBinaryEncoder.cpp",
        "Foundation/src/InflatingStream.cpp",
        "Foundation/src/Latin1Encoding.cpp",
        "Foundation/src/Latin2Encoding.cpp",
        "Foundation/src/Latin9Encoding.cpp",
        "Foundation/src/LineEndingConverter.cpp",
        "Foundation/src/LocalDateTime.cpp",
        "Foundation/src/LogFile.cpp",
        "Foundation/src/LogStream.cpp",
        "Foundation/src/Logger.cpp",
        "Foundation/src/LoggingFactory.cpp",
        "Foundation/src/LoggingRegistry.cpp",
        "Foundation/src/MD4Engine.cpp",
        "Foundation/src/MD5Engine.cpp",
        "Foundation/src/Manifest.cpp",
        "Foundation/src/MemoryPool.cpp",
        "Foundation/src/MemoryStream.cpp",
        "Foundation/src/Message.cpp",
        "Foundation/src/Mutex.cpp",
        "Foundation/src/NamedEvent.cpp",
        "Foundation/src/NamedMutex.cpp",
        "Foundation/src/NestedDiagnosticContext.cpp",
        "Foundation/src/Notification.cpp",
        "Foundation/src/NotificationCenter.cpp",
        "Foundation/src/NotificationQueue.cpp",
        "Foundation/src/NullChannel.cpp",
        "Foundation/src/NullStream.cpp",
        "Foundation/src/NumberFormatter.cpp",
        "Foundation/src/NumberParser.cpp",
        "Foundation/src/NumericString.cpp",
        "Foundation/src/Path.cpp",
        "Foundation/src/PatternFormatter.cpp",
        "Foundation/src/Pipe.cpp",
        "Foundation/src/PipeImpl.cpp",
        "Foundation/src/PipeStream.cpp",
        "Foundation/src/PriorityNotificationQueue.cpp",
        "Foundation/src/Process.cpp",
        "Foundation/src/PurgeStrategy.cpp",
        "Foundation/src/RWLock.cpp",
        "Foundation/src/Random.cpp",
        "Foundation/src/RandomStream.cpp",
        "Foundation/src/RefCountedObject.cpp",
        "Foundation/src/RegularExpression.cpp",
        "Foundation/src/RotateStrategy.cpp",
        "Foundation/src/Runnable.cpp",
        "Foundation/src/SHA1Engine.cpp",
        "Foundation/src/Semaphore.cpp",
        "Foundation/src/SharedLibrary.cpp",
        "Foundation/src/SharedMemory.cpp",
        "Foundation/src/SignalHandler.cpp",
        "Foundation/src/SimpleFileChannel.cpp",
        "Foundation/src/SplitterChannel.cpp",
        "Foundation/src/Stopwatch.cpp",
        "Foundation/src/StreamChannel.cpp",
        "Foundation/src/StreamConverter.cpp",
        "Foundation/src/StreamCopier.cpp",
        "Foundation/src/StreamTokenizer.cpp",
        "Foundation/src/String.cpp",
        "Foundation/src/StringTokenizer.cpp",
        "Foundation/src/SynchronizedObject.cpp",
        "Foundation/src/SyslogChannel.cpp",
        "Foundation/src/Task.cpp",
        "Foundation/src/TaskManager.cpp",
        "Foundation/src/TaskNotification.cpp",
        "Foundation/src/TeeStream.cpp",
        "Foundation/src/TemporaryFile.cpp",
        "Foundation/src/TextBufferIterator.cpp",
        "Foundation/src/TextConverter.cpp",
        "Foundation/src/TextEncoding.cpp",
        "Foundation/src/TextIterator.cpp",
        "Foundation/src/Thread.cpp",
        "Foundation/src/ThreadLocal.cpp",
        "Foundation/src/ThreadPool.cpp",
        "Foundation/src/ThreadTarget.cpp",
        "Foundation/src/TimedNotificationQueue.cpp",
        "Foundation/src/Timer.cpp",
        "Foundation/src/Timespan.cpp",
        "Foundation/src/Timestamp.cpp",
        "Foundation/src/Timezone.cpp",
        "Foundation/src/Token.cpp",
        "Foundation/src/URI.cpp",
        "Foundation/src/URIStreamFactory.cpp",
        "Foundation/src/URIStreamOpener.cpp",
        "Foundation/src/UTF16Encoding.cpp",
        "Foundation/src/UTF32Encoding.cpp",
        "Foundation/src/UTF8Encoding.cpp",
        "Foundation/src/UTF8String.cpp",
        "Foundation/src/UUID.cpp",
        "Foundation/src/UUIDGenerator.cpp",
        "Foundation/src/Unicode.cpp",
        "Foundation/src/UnicodeConverter.cpp",
        "Foundation/src/Void.cpp",
        "Foundation/src/Windows1250Encoding.cpp",
        "Foundation/src/Windows1251Encoding.cpp",
        "Foundation/src/Windows1252Encoding.cpp",
        "Foundation/src/bignum.h",
        "Foundation/src/bignum-dtoa.h",
        "Foundation/src/cached-powers.h",
        "Foundation/src/diy-fp.h",
        "Foundation/src/double-conversion.h",
        "Foundation/src/fast-dtoa.h",
        "Foundation/src/fixed-dtoa.h",
        "Foundation/src/ieee.h",
        "Foundation/src/pcre.h",
        "Foundation/src/pcre_chartables.c",
        "Foundation/src/pcre_compile.c",
        "Foundation/src/pcre_config.h",
        "Foundation/src/pcre_exec.c",
        "Foundation/src/pcre_fullinfo.c",
        "Foundation/src/pcre_globals.c",
        "Foundation/src/pcre_internal.h",
        "Foundation/src/pcre_maketables.c",
        "Foundation/src/pcre_newline.c",
        "Foundation/src/pcre_ord2utf8.c",
        "Foundation/src/pcre_study.c",
        "Foundation/src/pcre_tables.c",
        "Foundation/src/pcre_ucd.c",
        "Foundation/src/pcre_valid_utf8.c",
        "Foundation/src/pcre_xclass.c",
        "Foundation/src/strtod.h",
        "Foundation/src/ucp.h",
        "Foundation/src/utils.h",
    ],
    hdrs = glob(
        ["Foundation/include/Poco/*.h"],
        exclude = [
            "Foundation/include/Poco/*_WIN*.h",
            "Foundation/include/Poco/*_HPUX.h",
            "Foundation/include/Poco/*_DEC.h",
            "Foundation/include/Poco/*_SUN.h",
            "Foundation/include/Poco/*_VMS.h",
            "Foundation/include/Poco/*_VX.h",
            "Foundation/include/Poco/EventLogChannel.h",
            "Foundation/include/Poco/UnWindows.h",
            "Foundation/include/Poco/WindowsConsoleChannel.h",
        ],
    ) + [
        "Foundation/src/DirectoryIterator_UNIX.cpp",
        "Foundation/src/Environment_UNIX.cpp",
        "Foundation/src/Event_POSIX.cpp",
        "Foundation/src/FileStream_POSIX.cpp",
        "Foundation/src/File_UNIX.cpp",
        "Foundation/src/FPEnvironment_C99.cpp",
        "Foundation/src/LogFile_STD.cpp",
        "Foundation/src/Mutex_POSIX.cpp",
        "Foundation/src/NamedEvent_UNIX.cpp",
        "Foundation/src/NamedMutex_UNIX.cpp",
        "Foundation/src/Path_UNIX.cpp",
        "Foundation/src/PipeImpl_POSIX.cpp",
        "Foundation/src/Process_UNIX.cpp",
        "Foundation/src/RWLock_POSIX.cpp",
        "Foundation/src/Semaphore_POSIX.cpp",
        "Foundation/src/SharedLibrary_UNIX.cpp",
        "Foundation/src/SharedMemory_POSIX.cpp",
        "Foundation/src/Thread_POSIX.cpp",
        "Foundation/src/Timezone_UNIX.cpp",
        "Foundation/src/diy-fp.cc",
        "Foundation/src/cached-powers.cc",
        "Foundation/src/bignum-dtoa.cc",
        "Foundation/src/bignum.cc",
        "Foundation/src/fast-dtoa.cc",
        "Foundation/src/fixed-dtoa.cc",
        "Foundation/src/strtod.cc",
        "Foundation/src/double-conversion.cc",
    ],
    copts = [
        "-Wno-sign-compare",
        "-Wno-unknown-pragmas",
    ],
    defines = ["HAVE_MEMMOVE"],
    includes = ["Foundation/include"],
    linkopts = [
        "-ldl",
        "-lrt",
    ],
    visibility = ["//visibility:public"],
    deps = [
        "@net_zlib_zlib//:zlib",
    ],
)
